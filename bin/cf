#!/bin/sh
# Count entries in a given set of directories
ex=0
for dir in "${@:-.}" ; do
    if ! [ -d "$dir" ] ; then
        printf >&2 'cf: %s: not a directory\n' "$dir"
        ex=1
        continue
    fi
    c=0
    for ent in "$dir"/* "$dir"/.* ; do
        [ -e "$ent" ] || continue
        case $ent in
            */.|*/..) ;;
            *) c=$((c+1)) ;;
        esac
    done
    printf '%u\t%s\n' "$c" "$dir"
done
exit "$ex"
