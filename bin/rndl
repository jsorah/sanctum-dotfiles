#!/bin/sh
# Print a random line from input
if [ "$#" -eq 0 ] ; then
    td=
    cleanup() {
        rm -fr -- "$td"
    }
    for sig in EXIT HUP INT TERM ; do
        trap cleanup "$sig"
    done
    td=$(mktd rndl) || exit
    set -- "$td"/stdin
    cat >"$td"/stdin
fi
lc=$(sed -- '$=;d' "$@") || exit
seed=$(rnds)
ri=$(rndi 1 "$lc" "$seed") || exit
sed -- "$ri"'!d' "$@"
